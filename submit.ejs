<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Submit Quiz</title>
    <script>
      // Function to check for unique pseudonym before form submission
      function checkUniquePseudo() {
        const pseudo = document.getElementById("pseudo").value;
        fetch('/check-pseudo/' + pseudo)
          .then(response => response.json())
          .then(data => {
            if (data.exists) {
              document.getElementById("error-message").innerText = "This pseudonym is already taken.";
              document.getElementById("submit-btn").disabled = true;
            } else {
              document.getElementById("error-message").innerText = "";
              document.getElementById("submit-btn").disabled = false;
            }
          });
      }
    </script>
  </head>
  <body class="bg-gradient-to-br from-blue-100 via-white to-blue-200 min-h-screen py-10 px-6">
    <div class="max-w-xl mx-auto bg-white rounded-lg shadow-lg p-8">
      <h1 class="text-4xl font-extrabold text-center text-blue-700 mb-6">
        ðŸ“‹ Submit Your Quiz
      </h1>

      <form action="/submit/<%= quizId %>" method="POST">
        <label for="pseudo" class="block text-lg">Pseudonym:</label>
        <input
          type="text"
          id="pseudo"
          name="pseudo"
          oninput="checkUniquePseudo()"
          class="block w-full p-2 border rounded mt-2"
          placeholder="Enter your pseudonym"
          required
        />
        <p id="error-message" class="text-red-500 mt-2"></p>

        <label for="score" class="block text-lg mt-4">Score:</label>
        <input
          type="number"
          id="score"
          name="score"
          class="block w-full p-2 border rounded mt-2"
          required
        />

        <button type="submit" id="submit-btn" class="bg-blue-600 text-white px-6 py-2 rounded-full shadow mt-4" disabled>
          Submit Quiz
        </button>
      </form>
    </div>
  </body>
</html>
